<?xml version="1.0" encoding="utf-8" ?>
<dx:BottomSheet xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Dimmer.Views.CustomViewsParts.QuickPanelBtmSheet"
             xmlns:converters="clr-namespace:Dimmer.Utilities.TypeConverters;assembly=Dimmer"
xmlns:customViewParts="clr-namespace:Dimmer.Views.CustomViewsParts"
xmlns:dx="http://schemas.devexpress.com/maui"
xmlns:helper="clr-namespace:Dimmer.Utils.AnimsStatics"
xmlns:models="clr-namespace:Dimmer.Data.ModelView;assembly=Dimmer"
xmlns:navDrawer="clr-namespace:Syncfusion.Maui.Toolkit.NavigationDrawer;assembly=Syncfusion.Maui.Toolkit"
xmlns:progressBar="clr-namespace:Syncfusion.Maui.Toolkit;assembly=Syncfusion.Maui.Toolkit"
xmlns:syncf="http://schemas.syncfusion.com/maui/toolkit"
xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
xmlns:viewUtils="clr-namespace:Dimmer.Utilities.ViewsUtils;assembly=Dimmer"
xmlns:vm="clr-namespace:Dimmer.ViewModels"
x:Name="myPage"
x:DataType="vm:BaseViewModelAnd"
x:FieldModifier="Public">

    <dx:BottomSheet.Resources>
        <ResourceDictionary>
            <Style TargetType="Label">
                <Setter Property="FontFamily" Value="AleySans" />
            </Style>
        </ResourceDictionary>
    </dx:BottomSheet.Resources>

    <Grid RowDefinitions="auto,*">
        <dx:TextEdit Grid.Row="0" TextChanged="TextEdit_TextChanged"
                     />
        <dx:AutoCompleteEdit TextChanged="AutoCompleteEdit_TextChanged"
                            Grid.Row="0"
                             SelectionChanged="AutoCompleteEdit_SelectionChanged"
                             />
        <dx:DXImage Opacity="0.3" Source="{Binding BaseVM.SelectedSongForContext.CoverImageBytes, Converter={converters:BytesArrayToImageSource}}" />
        <dx:DXStackLayout BackgroundColor="Transparent" 
                          Grid.Row="1"
                          Orientation="Vertical">
            <dx:DXStackLayout.Resources>
                <ResourceDictionary>
                    <Style TargetType="dx:DXButton">
                        <Setter Property="ButtonType" Value="ToolButton" />
                        <Setter Property="HorizontalContentAlignment" Value="Start" />

                    </Style>
                    <Style TargetType="Label">
                        <Setter Property="FontSize" Value="24" />
                        <Setter Property="FontAttributes" Value="Bold" />

                    </Style>
                </ResourceDictionary>
            </dx:DXStackLayout.Resources>
            <dx:DXStackLayout BackgroundColor="Transparent" HorizontalOptions="Center"
                                  ItemSpacing="10" Orientation="Horizontal"
                                  VerticalOptions="Center"
                                  >
                <!--<toolkit:AvatarView ImageSource="{Binding CurrentPlayingSongView.CoverImagePath}"
                     HeightRequest="100" WidthRequest="100"
                     CornerRadius="15" BorderWidth="0"/>-->
                <dx:DXStackLayout Orientation="Vertical" VerticalOptions="Center">

                    <Label FontFamily="AleySans" FontSize="20"
                               HorizontalTextAlignment="Center" LineBreakMode="NoWrap"
                               Text="{Binding BaseVM.SelectedSongForContext.Title}"
                               />
                    <Label FontFamily="AleySans" FontSize="14"
                               HorizontalTextAlignment="Center"
                               Text="{Binding BaseVM.SelectedSongForContext.ArtistName}"
                               />
                </dx:DXStackLayout>
            </dx:DXStackLayout>

            <dx:DXSeparator />
            <dx:DXButton BackgroundColor="Transparent"
                             Command="{Binding OpenRepeatSetterPopupCommand}"
                             Content="Set Play Repeat Count" Icon="repone.png"
                             />
            <dx:DXButton x:Name="AddToPlaylist"
                             Command="{Binding BaseVM.AddToNextCommand}" Content="Add to Next in Queue"
                             Icon="addplaylist.png"
                             />
            <dx:DXButton x:Name="GoToAlbumBtn"
                             Command="{Binding BaseVM.AddToQueueCommand}"
                                                      Content="Add To End" Icon="album.png"
                             />
            <dx:DXButton x:Name="GotoArtistBtn"
                             Clicked="GotoArtistBtn_Clicked" Content="Go to Artist"
                             Icon="artist.png"
                             />
            <dx:DXButton Command="{Binding OpenEditSongPopupCommand}"
                             CommandParameter="{Binding BaseVM.SelectedSongForContext}"
                             Content="Tag Editor" Icon="clapperboardedit.png"
                             />
            <dx:DXButton Clicked="DXButton_Clicked_3"
                             Command="{Binding BaseVM.OpenFileInFolderCommand}"
                             Content="Song Info" Icon="fileinfo.png"
                             />
            <dx:DXButton Clicked="ClosePopup"
                             Command="{Binding BaseVM.ShareCurrentPlayingAsStoryInCardLikeGradientCommand}"
                             Content="Share" Icon="squareforward.png"
                             />
            <dx:DXButton Command="{Binding BaseVM.DeleteSongsCommand}"
                             CommandParameter="{Binding CurrentPlayingSongView}"
                             Content="Delete" Icon="delete.png"
                             />

        </dx:DXStackLayout>
    </Grid>

</dx:BottomSheet>