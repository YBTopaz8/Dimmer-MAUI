<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="Dimmer.WinUI.Views.WinUIPages.AllSongsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Dimmer.WinUI.Views.WinUIPages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="All Songs"
    xmlns:converters="clr-namespace:Dimmer.Utilities.TypeConverters;assembly=Dimmer"
xmlns:cw="clr-namespace:Dimmer.WinUI.Views.CustomViews"
xmlns:lang="clr-namespace:Dimmer.Resources.Localization;assembly=Dimmer"
xmlns:material="http://schemas.enisn-projects.io/dotnet/maui/uraniumui/material"
xmlns:models="clr-namespace:Dimmer.Data.ModelView;assembly=Dimmer"
xmlns:dimmSearch="clr-namespace:Dimmer.Data.ModelView.DimmerSearch;assembly=Dimmer"
xmlns:modelsDb="clr-namespace:Dimmer.Data.Models;assembly=Dimmer"
xmlns:modeltwo="clr-namespace:Dimmer.WinUI.Utils.Models"
xmlns:syncf="http://schemas.syncfusion.com/maui/toolkit"
xmlns:chart="http://schemas.syncfusion.com/maui/toolkit"
xmlns:tql="clr-namespace:Dimmer.DimmerSearch.TQL;assembly=Dimmer"
xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
xmlns:uranium="http://schemas.enisn-projects.io/dotnet/maui/uraniumui"
xmlns:vm="clr-namespace:Dimmer.WinUI.ViewModel"
xmlns:windows="clr-namespace:Microsoft.Maui.Controls.PlatformConfiguration.WindowsSpecific;assembly=Microsoft.Maui.Controls"
x:Name="myPage"
    
    xmlns:dgView="using:WinUI.TableView">

    <Window.SystemBackdrop>
        <DesktopAcrylicBackdrop />
    </Window.SystemBackdrop>
    <Page x:Name="MyPageGrid" d:DataContext="{d:DesignInstance Type=vm:BaseViewModelWin, IsDesignTimeCreatable=True}">
        
    <Grid RowSpacing="10">
            <Grid.Resources>
               
            </Grid.Resources>
            <Grid.RowDefinitions>
                <!-- Row 0: This will take up all available vertical space -->
                <RowDefinition Height="Auto" />

                <!-- Row 1: This will take up just enough height for the controls inside it -->
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>


            <StackPanel Grid.Row="0" Spacing="10" HorizontalAlignment="Center">
                <TextBlock Text="{x:Bind MyViewModel.CurrentPlayingSongView.Title}" 
                           HorizontalTextAlignment="Center"
                           HorizontalAlignment="Center"
                           FontSize="24" FontWeight="Bold" Margin="10"/>

                <Button Content="Scroll To Song"
                        x:Name="ScrollToSongBtn"
                        Click="ScrollToSong_Click"
                        ClickMode="Press"/>

                <TextBox TextChanged="SearchSongSB_TextChanged"
                    
                            AutomationProperties.Name="multi-line TextBox"
    TextWrapping="Wrap" AcceptsReturn="True" IsSpellCheckEnabled="True"
    SelectionHighlightColor="DarkSlateBlue" MinWidth="400" 
                             x:Name="SearchSongSB" />
            </StackPanel>
                <dgView:TableView Grid.Row="1" x:Name="MySongsTableView" ItemsSource="{x:Bind MyViewModel.SearchResults}"
                          RightTapped="TableView_RightTapped"
                          PointerPressed="TableView_PointerPressed"
                           AutoGenerateColumns="False"
                              DoubleTapped="TableView_DoubleTapped"
                              IsRightTapEnabled="True"
                                  
                              BringIntoViewRequested="TableView_BringIntoViewRequested"
                              CellContextFlyoutOpening="TableView_CellContextFlyoutOpening"
                              ExportSelectedContent="TableView_ExportSelectedContent"
                              >
                <dgView:TableView.Columns>

                    <!-- Column for the Cover Art -->
                    <dgView:TableViewTemplateColumn Header="Cover">
                        <dgView:TableViewTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Grid>
                                    <!-- You can even overlay a "favorite" icon like in your example -->
                                    <Image Source="{Binding CoverImagePath}"
                                       Width="100"
                                       Height="100"
                                       Stretch="UniformToFill"/>

                                   
                                </Grid>
                            </DataTemplate>
                        </dgView:TableViewTemplateColumn.CellTemplate>
                    </dgView:TableViewTemplateColumn>

                    <!-- Other columns for Title, Artist, etc. -->
                    <dgView:TableViewTextColumn  Header="Title"  IsReadOnly="True" Binding="{Binding Title}"/>

                    <dgView:TableViewTextColumn IsReadOnly="True" Header="Artist" MaxWidth="300" Binding="{Binding ArtistName}"/>

                    <dgView:TableViewTextColumn IsReadOnly="True" Header="Album" Binding="{Binding AlbumName}" MaxWidth="200"/> 

                    <dgView:TableViewTextColumn IsReadOnly="True" Header="Year" Binding="{Binding ReleaseYear}"/>
                    <dgView:TableViewTextColumn IsReadOnly="True" Header="Event" Binding="{Binding PlayCount}"/>
                    <dgView:TableViewTextColumn IsReadOnly="True" Header="Dims" Binding="{Binding PlayCompletedCount}"/>
                    <dgView:TableViewTextColumn IsReadOnly="True" Header="Skip Count" Binding="{Binding SkipCount}"/>

                </dgView:TableView.Columns>
            </dgView:TableView>

        </Grid>
    </Page>
</Window>
