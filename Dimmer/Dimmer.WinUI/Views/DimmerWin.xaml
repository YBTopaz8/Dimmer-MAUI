<?xml version="1.0" encoding="utf-8" ?>
<Window
    x:Class="Dimmer.WinUI.Views.DimmerWin"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:animatedvisuals="using:Microsoft.UI.Xaml.Controls.AnimatedVisuals"
    xmlns:converters="using:Dimmer.WinUI.Utils.Converters"
    xmlns:customViews="using:Dimmer.WinUI.Views.CustomViews.WinuiViews"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:Dimmer.WinUI.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="DimmerWin"
    Activated="Window_Activated"
    xmlns:localViews="using:Dimmer.WinUI.Views.CustomViews.WinuiViews"
    Closed="DimmerWindowClosed"
    SizeChanged="Window_SizeChanged"
    
    mc:Ignorable="d">




    <Grid x:Name="MainGrid" Background="Transparent"
          KeyDown="MainGrid_KeyDown">
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Margin="5" Loaded="DimmerStatusPanel_Loaded"
                        x:Name="DimmerStatusPanel"
     Visibility="{x:Bind MyViewModel.DimmerProgressBarView.Visibility, Mode=OneWay}">

               
                <ProgressBar IsIndeterminate="True"
                         
                         Value="30"
     Visibility="{x:Bind MyViewModel.DimmerProgressBarView.Visibility, Mode=OneWay}"
                         Margin="10,5" 
                         Loaded="DimmerProgressBar_Loaded"
                         x:Name="DimmerProgressBar"
                         />

                <TextBlock  HorizontalAlignment="Center"
                       x:Name="DimmerStatusTextBlock"
     Visibility="{x:Bind MyViewModel.DimmerProgressBarView.Visibility, Mode=OneWay}"
     Text="{x:Bind MyViewModel.LatestAppLog.Message, Mode=OneWay}"
                       Loaded="DimmerStatusTextBlock_Loaded"/>



            </StackPanel>
            <Button Grid.Column="1"  Click="ClearStatus_Click" 
                    Background="Transparent"
                    x:Name="ClearStatus" HorizontalAlignment="Right">
                <SymbolIcon Symbol="Clear" Height="15" Width="15" />
            </Button>
        </Grid>
        <customViews:MediaPlaybackSection
           Loaded="TopMediaControlSection_Loaded"
            x:Name="TopMediaControlSection" Grid.Row="1" />

        <Frame
            x:Name="ContentFrame"
            Grid.Row="2"
            x:FieldModifier="Public" />
        
        <localViews:SmokeViewQueueGrid x:Name="SmokeGrid" Visibility="Collapsed" Grid.RowSpan="3" DismissRequested="SmokeGrid_DismissRequested"
                            Loaded="SmokeGrid_Loaded"/>

    </Grid>
</Window>
