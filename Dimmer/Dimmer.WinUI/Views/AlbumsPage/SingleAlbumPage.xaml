<?xml version="1.0" encoding="utf-8" ?>
<ContentPage 
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="Dimmer.WinUI.Views.AlbumsPage.SingleAlbumPage"
    Title="SingleAlbumPage"
    xmlns:converters="clr-namespace:Dimmer.Utilities.TypeConverters;assembly=Dimmer"
    xmlns:cw="clr-namespace:Dimmer.WinUI.Views.CustomViews"
    xmlns:lang="clr-namespace:Dimmer.Resources.Localization;assembly=Dimmer"
    xmlns:material="http://schemas.enisn-projects.io/dotnet/maui/uraniumui/material"
    xmlns:models="clr-namespace:Dimmer.Data.ModelView;assembly=Dimmer"
    xmlns:dimmSearch="clr-namespace:Dimmer.Data.ModelView.DimmerSearch;assembly=Dimmer"
    xmlns:modelsDb="clr-namespace:Dimmer.Data.Models;assembly=Dimmer"
    xmlns:modeltwo="clr-namespace:Dimmer.WinUI.Utils.Models"
    xmlns:syncf="http://schemas.syncfusion.com/maui/toolkit"
    
    xmlns:tql="clr-namespace:Dimmer.DimmerSearch.TQL;assembly=Dimmer"
    
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
    xmlns:uranium="http://schemas.enisn-projects.io/dotnet/maui/uraniumui"
    xmlns:vm="clr-namespace:Dimmer.WinUI.ViewModel"
    xmlns:behv ="clr-namespace:CommunityToolkit.WinUI.Behaviors;assembly=CommunityToolkit.WinUI.Behaviors"
    xmlns:windows="clr-namespace:Microsoft.Maui.Controls.PlatformConfiguration.WindowsSpecific;assembly=Microsoft.Maui.Controls"
    x:Name="myPage"
    xmlns:local="clr-namespace:Dimmer.WinUI.Views"
    xmlns:device="clr-namespace:Microsoft.Maui.Devices;assembly=Microsoft.Maui.Essentials"
    
    Shell.FlyoutBehavior="Flyout"
 
    
    x:DataType="vm:BaseViewModelWin"
    BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=transparent}"
    
    Shell.NavBarIsVisible="False"
    >

    <ScrollView>
        
        <Grid RowDefinitions="auto,*,*,*">
            <HorizontalStackLayout Grid.Row="0">

                <Label 
                Text="Welcome to .NET MAUI!"
                VerticalOptions="Center" 
                HorizontalOptions="Center" />
            </HorizontalStackLayout>
            
            <Grid Grid.Row="1">

                <Image 
                  Source="{Binding CurrentCoverImagePath}"  
                VerticalOptions="Center" 
                HorizontalOptions="Center" />

                <Grid ColumnDefinitions="*,*">
                    <Label 
                        Text="{Binding SelectedSong.Title}" 
                        VerticalOptions="Center" 
                        HorizontalOptions="Center" 
                        Grid.Column="0"/>
                    <Label 
                        Text="{Binding SelectedSong.AlbumName}" 
                        VerticalOptions="Center" 
                        HorizontalOptions="Center" 
                        Grid.Column="1"/>
                </Grid>
                
            </Grid>

            <Grid Grid.Row="2">
                <CollectionView ItemsSource="{Binding ArtistBingeScore}"
                                />
            </Grid>

            <Grid Grid.Row="3">
                <CollectionView ItemsSource="{Binding SearchResults}"
                                >
                    <CollectionView.ItemTemplate>
                        <DataTemplate x:DataType="models:SongModelView">
                            <Grid ColumnDefinitions="*,*,*">
                                <Image Grid.Column="0" />

                                <VerticalStackLayout Grid.Column="1">
                                    <Label Text="{Binding Title}"/>
                                    <Button Text="{Binding OtherArtistsName}"
                                                  x:Name="ViewAlbumArtists"
                                            CommandParameter="{Binding .}"
                                            Loaded="ViewAlbumArtists_Loaded"
                                            Unloaded="ViewAlbumArtists_Unloaded"
                                            Clicked="ViewAlbumArtists_Clicked">
                                        
                                    </Button>
                                </VerticalStackLayout>

                            </Grid>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Grid>
            
            
        </Grid>

            
    </ScrollView>

</ContentPage>