<?xml version="1.0" encoding="utf-8" ?>
<UserControl
    x:Class="Dimmer.WinUI.Views.CustomViews.WinuiViews.SongCoverView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:Dimmer.WinUI.Views.CustomViews.WinuiViews"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:Dimmer.Data.ModelView"
    mc:Ignorable="d">

    <Grid ColumnSpacing="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="400" />
            <!--  Current Image Panel  -->
            <ColumnDefinition Width="*" />
            <!--  Search Results  -->
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Column="0" Spacing="15">
            <TextBlock
                FontSize="18"
                FontWeight="Bold"
                Text="Current Cover" />

            <Border
                Background="#111"
                BorderBrush="#333"
                BorderThickness="1"
                CornerRadius="12">
                <Image
                    MaxHeight="400"
                    Source="{x:Bind ViewModel.SelectedSong.CoverImagePath, Mode=OneWay, Converter={StaticResource StringToImageConverter}}"
                    Stretch="Uniform" />
            </Border>

            <Grid ColumnSpacing="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Button
                    Grid.Column="0"
                    HorizontalAlignment="Stretch"
                    Command="{x:Bind ViewModel.PickSongImageFromFolderCommand}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE838;" />
                        <TextBlock Text="Pick Local" />
                    </StackPanel>
                </Button>
                <Button Grid.Column="1" HorizontalAlignment="Stretch">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE74E;" />
                        <TextBlock Text="Save to File" />
                    </StackPanel>
                </Button>
            </Grid>
        </StackPanel>

        <Grid Grid.Column="1" RowDefinitions="Auto,*">
            <StackPanel Margin="0,0,0,15" Spacing="10">
                <TextBlock
                    FontSize="18"
                    FontWeight="Bold"
                    Text="Online Search (Last.fm)" />
                <Grid ColumnSpacing="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBox PlaceholderText="Search terms..." Text="{x:Bind ViewModel.SelectedSong.AlbumName, Mode=OneWay}" />
                    <Button
                        Grid.Column="1"
                        Command="{x:Bind ViewModel.OpenSongInOnlineSearchCommand}"
                        CommandParameter="lastFM"
                        Content="Search" />
                </Grid>
            </StackPanel>

            <GridView
                Grid.Row="1"
                ItemsSource="{x:Bind ViewModel.SelectedSongLastFMData.Images, Mode=OneWay}"
                SelectionMode="Single">
                <GridView.ItemTemplate>
                    <DataTemplate>
                        <Grid
                            Width="150"
                            Height="180"
                            Margin="0,0,10,10"
                            Background="#252525"
                            CornerRadius="8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Image Source="{Binding Url}" Stretch="UniformToFill" />
                            <Button
                                Grid.Row="1"
                                Margin="5"
                                HorizontalAlignment="Stretch"
                                Background="#333"
                                Command="{Binding DataContext.SaveImageFromLastFMCommand, ElementName=RootGrid}"
                                CommandParameter="{Binding .}"
                                Content="Use This"
                                FontSize="10" />
                        </Grid>
                    </DataTemplate>
                </GridView.ItemTemplate>
            </GridView>
        </Grid>
    </Grid>
</UserControl>