<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="Dimmer.WinUI.Views.WinuiPages.SingleSongPage.SubPage.Stats.SongArtistStatsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:Dimmer.WinUI.Views.WinuiPages.SingleSongPage.SubPage.Stats"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Artist Selector (For Collabs)  -->
        <ComboBox
            x:Name="ArtistSelector"
            DisplayMemberPath="Name"
            Header="Compare against:"
            SelectedIndex="0" />

        <StackPanel
            Grid.Row="1"
            Margin="0,20,0,0"
            Spacing="20">
            <!--  Percentile Card  -->
            <Border
                Padding="20"
                Background="{ThemeResource LayerFillColorDefaultBrush}"
                CornerRadius="8">
                <StackPanel>
                    <TextBlock Opacity="0.6" Text="Popularity Tier" />
                    <TextBlock
                        FontSize="32"
                        FontWeight="Bold"
                        Foreground="MediumPurple"
                        Text="Top 5%" />
                    <TextBlock Opacity="0.6" Text="This is one of the artist's most played tracks." />
                </StackPanel>
            </Border>

            <!--  Comparison Bar Chart (XAML implementation)  -->
            <TextBlock FontWeight="SemiBold" Text="Most Played by this Artist" />
            <ItemsControl x:Name="TopArtistTracks">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <!--  Simple Bar implementation  -->
                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="50" />
                            </Grid.ColumnDefinitions>
                            <TextBlock
                                VerticalAlignment="Center"
                                Text="{Binding Title}"
                                TextTrimming="CharacterEllipsis" />

                            <!--  The Bar  -->
                            <Grid Grid.Column="1" Margin="10,0">
                                <ProgressBar
                                    Foreground="MediumPurple"
                                    Maximum="{Binding MaxPlaysOfArtist}"
                                    Value="{Binding PlayCount}" />
                            </Grid>

                            <TextBlock
                                Grid.Column="2"
                                HorizontalAlignment="Right"
                                Text="{Binding PlayCount}" />
                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
    </Grid>
</Page>
