<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="Dimmer.WinUI.Views.WinuiPages.DimmerLivePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:convertersWinUI="using:Dimmer.WinUI.Utils.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:Dimmer.WinUI.Views.WinuiPages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    <Page.Resources>
        <ResourceDictionary>
            <convertersWinUI:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
            <convertersWinUI:StringNullOrEmptyToDefaultIconWithParamtypeConverter x:Key="StringNullOrEmptyToDefaultIconWithParamtypeConverter" />
            <convertersWinUI:BoolToInverseConverter x:Key="BoolToInverseConverter" />
            <convertersWinUI:BoolToInverseVisibilityConverter x:Key="BoolToInverseVisibilityConverter" />
        </ResourceDictionary>
    </Page.Resources>
    <StackPanel>
        <Button
            x:Name="BackBtn"
            Background="DarkSlateBlue"
            BorderBrush="DarkSlateBlue"
            Click="BackBtn_Click"
            Content="Back"
            CornerRadius="0,5,5,0" />

        <Grid x:Name="GridOfAll" Margin="10">
            <Grid x:Name="GridOfAuth" Visibility="Visible">
                <StackPanel
                    x:Name="LoginStackPanel"
                    Padding="15"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    BorderBrush="DarkSlateBlue"
                    BorderThickness="2"
                    CornerRadius="20"
                    Spacing="10">
                    <TextBlock
                        HorizontalAlignment="Center"
                        FontSize="39"
                        Text="Dimmer Login" />

                    <TextBox
                        x:Name="DimmerUserName"
                        FontSize="19"
                        PlaceholderText="Dimmer User Name"
                        Text="{Binding LoginViewModel.Username}" />
                    <TextBox
                        x:Name="DimmerPassword"
                        FontSize="19"
                        PlaceholderText="Dimmer Password"
                        Text="{Binding LoginViewModel.Password}" />
                    <Button
                        x:Name="ForgottenPassword"
                        HorizontalAlignment="Center"
                        BorderThickness="0"
                        Click="ForgottenPassword_Click"
                        Content="Forgotten Password" />


                    <Button
                        HorizontalAlignment="Center"
                        Background="Transparent"
                        Click="LoginButton_Click"
                        Content="Login"
                        FontSize="26" />

                    <TextBlock
                        HorizontalAlignment="Center"
                        FontSize="18"
                        Foreground="Red"
                        Text="{Binding LoginViewModel.ErrorMessage}" />

                    <StackPanel
                        HorizontalAlignment="Center"
                        Orientation="Horizontal"
                        Spacing="5">
                        <TextBlock VerticalAlignment="Center" Text="Don't have an Account?" />
                        <Button
                            x:Name="SwitchToSignUpBtn"
                            BorderThickness="0"
                            Click="SwitchToSignUpBtn_Click">
                            <TextBlock Text="Sign Up" />
                        </Button>

                    </StackPanel>
                </StackPanel>

                <StackPanel
                    x:Name="SignUpPanel"
                    Spacing="10"
                    Visibility="Collapsed">
                    <TextBlock
                        HorizontalAlignment="Center"
                        FontSize="39"
                        Text="Dimmer Login" />

                    <TextBox
                        x:Name="DimmerUserNameSignUp"
                        FontSize="19"
                        PlaceholderText="Dimmer User Name"
                        Text="{Binding LoginViewModel.Username}" />

                    <TextBox
                        x:Name="DimmerEmailSignUp"
                        FontSize="19"
                        PlaceholderText="Your Email"
                        Text="{Binding LoginViewModel.Username}" />
                    <PasswordBox
                        x:Name="DimmerPasswordSignUp"
                        FontSize="19"
                        PlaceholderText="Dimmer Password" />
                    <PasswordBox
                        x:Name="DimmerPasswordSignUpConfirm"
                        FontSize="19"
                        PasswordChanged="DimmerPasswordSignUpConfirm_PasswordChanged"
                        PlaceholderText="Confirm Password" />



                    <TextBlock
                        x:Name="NotSamePasswordTxtBlock"
                        HorizontalAlignment="Center"
                        FontSize="18"
                        Foreground="Red" />
                    <Button
                        x:Name="SignupBtn"
                        HorizontalAlignment="Center"
                        Background="Transparent"
                        Click="SignupBtn_Click"
                        Content="Signup"
                        FontSize="26"
                        IsEnabled="False" />

                    <TextBlock
                        HorizontalAlignment="Center"
                        FontSize="18"
                        Foreground="Red"
                        Text="{Binding LoginViewModel.ErrorMessage}" />

                    <StackPanel
                        HorizontalAlignment="Center"
                        Orientation="Horizontal"
                        Spacing="5">
                        <TextBlock VerticalAlignment="Center" Text="Already have an Account?" />
                        <Button
                            x:Name="SwitchToLogInBtn"
                            BorderThickness="0"
                            Click="SwitchToLoginBtn_Click">
                            <TextBlock Text="Log In" />
                        </Button>

                    </StackPanel>
                </StackPanel>
            </Grid>

            <Grid x:Name="GridFullView" Visibility="Collapsed">
                <StackPanel HorizontalAlignment="Center" Spacing="10">
                    <Image
                        MaxWidth="200"
                        MaxHeight="200"
                        HorizontalAlignment="Right"
                        Source="/Dimmer/Resources/Images/usercircle.svg" />

                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock FontSize="26" Text="{Binding CurrentUser.Username}" />
                        <TextBlock FontSize="20" Text="{Binding CurrentUser.Email}" />

                    </StackPanel>

                    <StackPanel>

                        <ItemsRepeater ItemsSource="{Binding OtherDevices}">
                            <ItemsRepeater.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel
                                        Padding="10"
                                        BorderBrush="DarkSlateBlue"
                                        BorderThickness="1"
                                        CornerRadius="20"
                                        Spacing="15">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <StackPanel Grid.Column="0" Margin="0,0,10,0">

                                                <TextBlock FontSize="18" Text="Device Idiom" />
                                                <TextBlock FontSize="18" Text="Device Name" />
                                                <TextBlock FontSize="18" Text="Device Platform" />
                                                <TextBlock FontSize="18" Text="Device OS Version" />
                                                <TextBlock FontSize="18" Text="Session StartTime" />
                                            </StackPanel>
                                            <StackPanel Grid.Column="1" Margin="0,0,10,0">

                                                <TextBlock FontSize="18" Text="{Binding DeviceIdiom}" />
                                                <TextBlock FontSize="18" Text="{Binding DeviceName}" />
                                                <TextBlock FontSize="18" Text="{Binding DevicePlatform}" />
                                                <TextBlock FontSize="18" Text="{Binding DeviceOSVersion}" />
                                                <TextBlock FontSize="18" Text="{Binding SessionStartTime}" />
                                            </StackPanel>
                                        </Grid>

                                        <Button
                                            x:Name="BackUpDeviceBtn"
                                            HorizontalAlignment="Center"
                                            Click="BackUpDeviceBtn_Click"
                                            Visibility="Collapsed">
                                            <StackPanel Orientation="Horizontal">
                                                <Image Source="/Dimmer/Resources/Images/cloudfile.svg" />
                                                <TextBlock FontSize="16" Text="BackUp Device" />
                                            </StackPanel>
                                        </Button>


                                    </StackPanel>
                                </DataTemplate>
                            </ItemsRepeater.ItemTemplate>
                        </ItemsRepeater>


                        <StackPanel
                            HorizontalAlignment="Center"
                            Orientation="Horizontal"
                            Spacing="15">

                            <TextBlock FontSize="27" Text="Total Devices" />
                            <TextBlock FontSize="27" Text="{Binding OtherDevices.Count}" />

                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Grid>
    </StackPanel>
</Page>
