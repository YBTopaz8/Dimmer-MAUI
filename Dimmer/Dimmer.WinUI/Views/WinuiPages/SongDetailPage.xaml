<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="Dimmer.WinUI.Views.WinuiPages.SongDetailPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:CustomViews="using:Dimmer.WinUI.Views.CustomViews.WinuiViews"
    xmlns:achievements="using:Dimmer.WinUI.Views.WinuiPages.Achievements"
    xmlns:converters="using:Dimmer.WinUI.Utils.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dgView="using:WinUI.TableView"
    xmlns:dimmSearch="clr-namespace:Dimmer.Data.ModelView.DimmerSearch;assembly=Dimmer"
    xmlns:lang="clr-namespace:Dimmer.Resources.Localization;assembly=Dimmer"
    xmlns:local="using:Dimmer.WinUI.Views.WinuiPages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="clr-namespace:Dimmer.Data.ModelView;assembly=Dimmer"
    xmlns:modelsDb="clr-namespace:Dimmer.Data.Models;assembly=Dimmer"
    xmlns:modeltwo="clr-namespace:Dimmer.WinUI.Utils.Models"
    xmlns:queryBuilder="queries"
    xmlns:tql="clr-namespace:Dimmer.DimmerSearch.TQL;assembly=Dimmer"
    xmlns:vm="clr-namespace:Dimmer.WinUI.ViewModel"
    x:Name="MyPage"
    Loaded="MyPage_Loaded"
    mc:Ignorable="d">
    <Page.Resources />

    <Grid>

        <Grid PointerPressed="Grid_PointerPressed">
            <Image
                x:Name="BgImage"
                Opacity="0.05"
                Stretch="UniformToFill" />
            <Grid x:Name="FgGrid">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Border
                    Grid.Row="0"
                    Width="150"
                    Height="50"
                    Margin="10,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    Background="#111"
                    CornerRadius="5"
                    Visibility="Collapsed">
                    <StackPanel
                        Margin="12"
                        VerticalAlignment="Center"
                        Orientation="Horizontal"
                        Visibility="Collapsed">
                        <TextBlock
                            x:Name="CurrentSectionLabel"
                            FontSize="18"
                            FontWeight="SemiBold"
                            Text="Overview" />
                    </StackPanel>
                </Border>

                <ScrollViewer
                    x:Name="Scroller"
                    Grid.Row="1"
                    Margin="0,0,0,0"
                    Background="Transparent"
                    VerticalScrollBarVisibility="Auto"
                    ViewChanged="ScrollViewer_ViewChanged">
                    <StackPanel
                        x:Name="SegmentStack"
                        Padding="12"
                        Orientation="Vertical"
                        Spacing="20">

                        <!--  The elements involved in the animation  -->
                        <StackPanel Orientation="Horizontal" Spacing="15">

                            <Button
                                x:Name="EditSongBtn"
                                Click="EditSongBtn_Click"
                                Content="Edit"
                                FontSize="19" />

                            <Button
                                x:Name="EditSongAudioBtn"
                                Click="EditSongAudioBtn_Click"
                                Content="Edit Audio"
                                FontSize="19" />
                        </StackPanel>
                        <Grid
                            x:Name="SectionOverview"
                            ColumnSpacing="10"
                            PointerEntered="SectionOverview_PointerEntered"
                            PointerExited="SectionOverview_PointerExited">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />

                            </Grid.ColumnDefinitions>

                            <!--  The Image that will be the target of the connected animation  -->

                            <StackPanel Grid.Column="0" Spacing="10">

                                <Image
                                    x:Name="detailedImage"
                                    Width="350"
                                    Height="350"
                                    Loaded="detailedImage_Loaded" />
                                <Button
                                    x:Name="PlaySongBtn"
                                    HorizontalAlignment="Center"
                                    Click="PlaySongBtn_Click"
                                    Loaded="PlaySongBtn_Loaded"
                                    Visibility="Collapsed">
                                    <FontIcon FontSize="45" Glyph="&#xF5B0;" />
                                </Button>
                            </StackPanel>
                            <Border Grid.Column="1">

                                <StackPanel
                                    x:Name="coordinatedPanel"
                                    HorizontalAlignment="Left"
                                    Spacing="5">
                                    <StackPanel
                                        x:Name="UtilitiesSection"
                                        Background="Transparent"
                                        Orientation="Vertical"
                                        Spacing="10">
                                        <TextBlock
                                            x:Name="TitleBlock"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Top"
                                            FontSize="80"
                                            Style="{ThemeResource TitleTextBlockStyle}"
                                            Text="{x:Bind DetailedSong.Title}"
                                            TextWrapping="Wrap" />

                                        <StackPanel Orientation="Horizontal" Spacing="5">
                                            <Button
                                                x:Name="ArtistBtn"
                                                HorizontalAlignment="Left"
                                                Background="Transparent"
                                                BorderThickness="2"
                                                Click="ArtistBtn_Click"
                                                Content="{x:Bind DetailedSong.OtherArtistsName}"
                                                FontSize="50"
                                                FontWeight="Bold" />
                                            <Button x:Name="EditArtist" Click="EditArtist_Click">
                                                <FontIcon FontSize="25" Glyph="&#xE70F;" />
                                            </Button>
                                        </StackPanel>
                                        <StackPanel
                                            Margin="0,10,0,0"
                                            Orientation="Horizontal"
                                            Spacing="10">

                                            <Button
                                                x:Name="AlbumBtn"
                                                HorizontalAlignment="Left"
                                                Background="Transparent"
                                                BorderThickness="2"
                                                Click="AlbumBtn_Click"
                                                Content="{x:Bind DetailedSong.AlbumName}"
                                                FontSize="30" />
                                            <TextBlock
                                                VerticalAlignment="Center"
                                                FontSize="30"
                                                Text="{x:Bind DetailedSong.ReleaseYear}" />

                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal">

                                            <Button
                                                Background="Transparent"
                                                BorderThickness="2"
                                                Content="{x:Bind DetailedSong.GenreName}" />
                                            <Button
                                                Background="Transparent"
                                                BorderThickness="2"
                                                Content="{x:Bind DetailedSong.FileFormat}" />

                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Spacing="10">
                                            <TextBlock FontSize="19" Text="Dimms" />

                                            <Button Content="{x:Bind DetailedSong.PlayCompletedCount}" />
                                        </StackPanel>

                                        <Button
                                            x:Name="ViewInFolder"
                                            Command="{x:Bind MyViewModel.OpenAndSelectFileInExplorerCommand}"
                                            CommandParameter="{x:Bind DetailedSong}"
                                            ToolTipService.ToolTip="{x:Bind DetailedSong.FilePath}">
                                            <FontIcon Glyph="&#xE838;" />
                                        </Button>

                                        <Button x:Name="ViewCharts" Click="ViewCharts_Click">
                                            <FontIcon Glyph="&#xEB05;" />
                                        </Button>
                                        <StackPanel Orientation="Horizontal" Spacing="10">
                                            <Button
                                                VerticalAlignment="Bottom"
                                                Background="Transparent"
                                                BorderBrush="Transparent"
                                                Command="{Binding AddFavoriteRatingToSongCommand}"
                                                Foreground="SlateBlue"
                                                Visibility="{x:Bind DetailedSong.IsFavorite, Converter={StaticResource BoolToVisibilityConverter}}">

                                                <FontIcon Glyph="&#xEB52;" />
                                            </Button>

                                        </StackPanel>

                                        <RichTextBlock
                                            x:Name="BioBlock"
                                            Loaded="BioBlock_Loaded"
                                            TextWrapping="Wrap" />
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </Grid>

                        <StackPanel x:Name="SectionPlayback" Background="Transparent" />


                        <StackPanel
                            Padding="24"
                            Spacing="16"
                            Visibility="{x:Bind MyViewModel.SelectedSong.HasLyrics, Converter={StaticResource BoolToVis}}">
                            <TextBlock Style="{StaticResource SubtitleTextBlockStyle}" Text="Playback History" />

                            <StackPanel Orientation="Horizontal" Spacing="5">

                                <Button x:Name="TotalDims" Background="Transparent">
                                    <StackPanel Orientation="Horizontal" Spacing="5">

                                        <TextBlock Text="Total Dims : " />
                                        <TextBlock Text="{x:Bind MyViewModel.SelectedSong.PlayEvents.Count, Mode=OneWay}" />
                                    </StackPanel>
                                </Button>

                                <Button x:Name="TotalCompleted" Background="Transparent">
                                    <StackPanel Orientation="Horizontal" Spacing="5">

                                        <TextBlock Text="Dims Completed" />
                                        <TextBlock Text="{x:Bind MyViewModel.SelectedSong.PlayCompletedCount, Mode=OneWay}" />
                                    </StackPanel>
                                </Button>

                                <Button x:Name="TotalSkipped" Background="Transparent">
                                    <StackPanel Orientation="Horizontal" Spacing="5">

                                        <TextBlock Text="Skip Count" />
                                        <TextBlock Text="{x:Bind MyViewModel.SelectedSong.SkipCount, Mode=OneWay}" />
                                    </StackPanel>
                                </Button>

                                <Button x:Name="TotalStreaks" Background="Transparent">
                                    <StackPanel Orientation="Horizontal" Spacing="5">

                                        <TextBlock Text="Total Streaks" />
                                        <TextBlock Text="{x:Bind MyViewModel.SelectedSong.PauseCount, Mode=OneWay}" />
                                    </StackPanel>
                                </Button>
                            </StackPanel>

                            <StackPanel
                                Padding="10"
                                BorderBrush="#291B22"
                                BorderThickness="1"
                                CornerRadius="20"
                                Orientation="Horizontal"
                                Spacing="5">
                                <Button
                                    Background="Transparent"
                                    Click="FilterEventButton_Click"
                                    Content="All"
                                    CornerRadius="10" />

                                <StackPanel Orientation="Horizontal" Spacing="5">

                                    <Button
                                        Background="Transparent"
                                        Click="FilterEventButton_Click"
                                        CommandParameter="Started"
                                        Content="Started"
                                        CornerRadius="10" />
                                    <Button
                                        Background="Transparent"
                                        Click="FilterEventButton_Click"
                                        CommandParameter="Completed"
                                        Content="Completed"
                                        CornerRadius="10" />
                                    <Button
                                        Background="Transparent"
                                        Click="FilterEventButton_Click"
                                        CommandParameter="Pause"
                                        Content="Pause"
                                        CornerRadius="10" />
                                    <Button
                                        Background="Transparent"
                                        Click="FilterEventButton_Click"
                                        CommandParameter="Skipped"
                                        Content="Skipped"
                                        CornerRadius="10" />

                                </StackPanel>


                            </StackPanel>

                            <StackPanel
                                Padding="5"
                                HorizontalAlignment="Center"
                                Background="#291B22"
                                CornerRadius="5"
                                Orientation="Horizontal"
                                Spacing="2">
                                <TextBlock x:Name="EventsCount" />
                                <TextBlock Text="Events" />
                            </StackPanel>
                            <dgView:TableView
                                x:Name="SongPlayEvents"
                                Width="auto"
                                MaxHeight="400"
                                AutoGenerateColumns="False"
                                ItemsSource="{x:Bind MyViewModel.SelectedSong.PlayEvents, Mode=OneWay}"
                                Loaded="SongPlayEvents_Loaded"
                                SelectionMode="None">
                                <dgView:TableView.Columns>

                                    <!--  Column for the Cover Art  -->
                                    <dgView:TableViewTemplateColumn Width="*" Header="Event">
                                        <dgView:TableViewTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <StackPanel
                                                    Margin="10"
                                                    Padding="10"
                                                    HorizontalAlignment="Center"
                                                    BorderBrush="{Binding PlayType, Converter={StaticResource PlayTypeToBorderBrush}}"
                                                    BorderThickness="1.5"
                                                    CornerRadius="20">
                                                    <TextBlock FontWeight="Bold" Text="{Binding PlayTypeStr}" />
                                                    <TextBlock
                                                        Grid.Column="2"
                                                        VerticalAlignment="Center"
                                                        FontSize="12"
                                                        Opacity="0.5"
                                                        Text="{Binding DatePlayed, Converter={StaticResource EventDateOffsetToTimeAgo}}" />

                                                </StackPanel>
                                            </DataTemplate>
                                        </dgView:TableViewTemplateColumn.CellTemplate>
                                    </dgView:TableViewTemplateColumn>

                                    <dgView:TableViewTemplateColumn Width="*" Header="Time">
                                        <dgView:TableViewTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <StackPanel>

                                                    <TextBlock
                                                        Grid.Column="2"
                                                        VerticalAlignment="Center"
                                                        FontSize="12"
                                                        Text="{Binding DatePlayed, Converter={StaticResource EventDateOffsetToTimeAgo}}" />

                                                    <TextBlock
                                                        Grid.Column="2"
                                                        VerticalAlignment="Center"
                                                        FontSize="12"
                                                        Opacity="0.5"
                                                        Text="{Binding DatePlayed}" />

                                                </StackPanel>
                                            </DataTemplate>
                                        </dgView:TableViewTemplateColumn.CellTemplate>
                                    </dgView:TableViewTemplateColumn>


                                    <dgView:TableViewTemplateColumn
                                        Width="*"
                                        Header="Options"
                                        Visibility="Collapsed">
                                        <dgView:TableViewTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal">

                                                    <Button
                                                        x:Name="DeleteEventBtn"
                                                        Background="Transparent"
                                                        BorderThickness="0"
                                                        Click="DeleteEventBtn_Click"
                                                        Tag="{Binding}">
                                                        <FontIcon FontSize="24" Glyph="&#xE74D;" />
                                                    </Button>
                                                </StackPanel>
                                            </DataTemplate>
                                        </dgView:TableViewTemplateColumn.CellTemplate>
                                    </dgView:TableViewTemplateColumn>

                                </dgView:TableView.Columns>
                            </dgView:TableView>

                        </StackPanel>

                        <!--  SECTION 3: LYRICS  -->
                        <StackPanel x:Name="SectionLyricsStackPanel" Background="Transparent">

                            <StackPanel Orientation="Horizontal">

                                <Button
                                    x:Name="LyricsSection"
                                    Background="Transparent"
                                    Content="Lyrics Section"
                                    FontSize="34"
                                    FontWeight="ExtraBold" />
                                <Button
                                    x:Name="EditIconBtn"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Click="LyricsSection_Click">
                                    <FontIcon FontSize="24" Glyph="&#xE70F;" />
                                </Button>
                            </StackPanel>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <ScrollViewer MaxHeight="350" VerticalScrollBarVisibility="Auto">
                                    <ItemsRepeater ItemsSource="{x:Bind MyViewModel.SelectedSongLyricsObsCol, Mode=OneWay}">
                                        <ItemsRepeater.ItemTemplate>
                                            <DataTemplate>
                                                <Border>
                                                    <StackPanel
                                                        Background="Transparent"
                                                        Orientation="Horizontal"
                                                        Spacing="15">

                                                        <TextBlock FontSize="26" Text="{Binding Text}" />

                                                    </StackPanel>
                                                </Border>
                                            </DataTemplate>


                                        </ItemsRepeater.ItemTemplate>
                                    </ItemsRepeater>
                                </ScrollViewer>
                                <Grid
                                    x:Name="RootGrid"
                                    Grid.Column="1"
                                    VerticalAlignment="Top"
                                    Background="Transparent">
                                    <StackPanel x:Name="ArtistListPanel" HorizontalAlignment="Center">
                                        <TextBlock
                                            FontSize="28"
                                            FontWeight="SemiBold"
                                            Text="Artists In This Song" />
                                        <ItemsRepeater
                                            x:Name="ArtistToSong"
                                            HorizontalAlignment="Center"
                                            Loaded="ArtistToSong_Loaded">

                                            <ItemsRepeater.ItemTemplate>

                                                <DataTemplate>
                                                    <Button
                                                        x:Name="ArtistNameBtn"
                                                        Margin="0,10,0,0"
                                                        BorderThickness="1"
                                                        Click="Artist_Click"
                                                        CornerRadius="15">
                                                        <StackPanel
                                                            VerticalAlignment="Center"
                                                            Background="Transparent"
                                                            Orientation="Horizontal"
                                                            Spacing="10">
                                                            <TextBlock FontSize="26" Text="{Binding Name}" />
                                                            <StackPanel
                                                                VerticalAlignment="Center"
                                                                Orientation="Horizontal"
                                                                Spacing="0">
                                                                <TextBlock FontSize="16" Text="(" />
                                                                <TextBlock FontSize="16" Text="{Binding TotalSongsByArtist}" />
                                                                <TextBlock FontSize="16" Text=")" />
                                                                <TextBlock
                                                                    Margin="5,0,0,0"
                                                                    FontSize="16"
                                                                    Text="Songs" />

                                                            </StackPanel>
                                                        </StackPanel>
                                                    </Button>
                                                </DataTemplate>
                                            </ItemsRepeater.ItemTemplate>
                                        </ItemsRepeater>

                                    </StackPanel>

                                    <Border
                                        x:Name="ArtistDetailBorder"
                                        Width="350"
                                        Height="350"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Background="#1E1E1E"
                                        BorderBrush="DarkSlateBlue"
                                        BorderThickness="2"
                                        Canvas.ZIndex="99"
                                        CornerRadius="15"
                                        Visibility="Collapsed">

                                        <Grid>
                                            <!--<Image Opacity="0.4">
                                                <Image.Source>
                                                    <BitmapImage UriSource="{Binding ImagePath}" />
                                                </Image.Source>
                                            </Image>-->
                                            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">

                                                <TextBlock
                                                    Margin="0,0,0,20"
                                                    HorizontalAlignment="Center"
                                                    FontSize="34"
                                                    FontWeight="Bold"
                                                    Foreground="White"
                                                    Text="{Binding Name}" />
                                                <StackPanel
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Bottom"
                                                    Orientation="Horizontal"
                                                    Spacing="10">

                                                    <Button
                                                        x:Name="ArtistPreviewButton"
                                                        Padding="15"
                                                        HorizontalAlignment="Center"
                                                        Background="Transparent"
                                                        Click="CloseArtistDetail_Click"
                                                        CornerRadius="12">

                                                        <SymbolIcon Foreground="White" Symbol="Back" />
                                                    </Button>

                                                    <Button
                                                        Padding="15"
                                                        Background="Transparent"
                                                        BorderThickness="2"
                                                        Click="ArtistNameBtn_Click"
                                                        Content="View"
                                                        CornerRadius="12"
                                                        FontSize="19"
                                                        FontWeight="ExtraBold" />

                                                </StackPanel>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Grid>
                        </StackPanel>


                        <StackPanel>

                            <StackPanel Orientation="Horizontal">
                                <TextBlock
                                    x:Name="AchievementsTB"
                                    FontSize="38"
                                    FontWeight="Bold"
                                    Text="Achievements" />
                                <Button x:Name="ViewAllAchievementsBtn" ToolTipService.ToolTip="ViewAll">
                                    <FontIcon Glyph="&#xF133;" />
                                </Button>
                            </StackPanel>
                            <achievements:SongAchievementsControl
                                x:Name="MySongAchievements"
                                Height="450"
                                Loaded="MySongAchievements_Loaded"
                                Loading="MySongAchievements_Loading" />


                            <ListView
                                x:Name="AllAchievementsIR"
                                Grid.Column="0"
                                Loaded="AllAchievementsIR_Loaded">

                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Border
                                            x:Name="connectedPopUpElement"
                                            Width="190"
                                            Padding="10"
                                            BorderBrush="DarkSlateBlue"
                                            BorderThickness="2"
                                            CornerRadius="20"
                                            PointerPressed="connectedPopUpElement_PointerPressed">
                                            <StackPanel>
                                                <TextBlock Text="{Binding Name}" />
                                                <TextBlock Text="{Binding Description}" />
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>

                        </StackPanel>



                        <!--  SECTION 6: RELATED  -->
                        <StackPanel
                            x:Name="SectionRelated"
                            Height="400"
                            Spacing="10">
                            <TextBlock
                                FontSize="34"
                                FontWeight="ExtraBold"
                                Text="Related Section" />
                            <StackPanel
                                Padding="8"
                                HorizontalAlignment="Left"
                                BorderBrush="Gray"
                                BorderThickness="1"
                                CornerRadius="10"
                                Orientation="Horizontal"
                                Spacing="10">

                                <TextBlock FontSize="24" Text="{Binding SelectedSongLastFMData.Statistics.Listeners}" />
                                <TextBlock
                                    FontSize="24"
                                    Text="Listeners"
                                    ToolTipService.ToolTip="Total LastFM Listeners" />
                            </StackPanel>
                            <StackPanel
                                Padding="8"
                                HorizontalAlignment="Left"
                                BorderBrush="Gray"
                                BorderThickness="1"
                                CornerRadius="10"
                                Orientation="Horizontal"
                                Spacing="10">

                                <TextBlock FontSize="24" Text="{Binding SelectedSongLastFMData.Statistics.PlayCount}" />
                                <TextBlock
                                    FontSize="24"
                                    Text="Scrobbles"
                                    ToolTipService.ToolTip="Total LastFM Scrobbles" />

                            </StackPanel>
                            <TextBlock Text="Last FM Stats..." />
                            <TextBlock Text="{Binding SimilarTracks.Count}" />

                            <ScrollViewer Visibility="{Binding SimilarTracks.Count, Converter={StaticResource CollectionSizeToVisibility}}">

                                <ItemsRepeater ItemsSource="{Binding SimilarTracks}">
                                    <ItemsRepeater.Layout>
                                        <UniformGridLayout
                                            ItemsJustification="Center"
                                            ItemsStretch="Uniform"
                                            MinColumnSpacing="15"
                                            Orientation="Horizontal" />
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <Border
                                                Margin="0,0,0,10"
                                                Padding="8"
                                                BorderBrush="Gray"
                                                BorderThickness="1"
                                                CornerRadius="10">
                                                <StackPanel
                                                    x:Name="SimilarSongStackPanel"
                                                    Width="140"
                                                    PointerEntered="SimilarSongStackPanel_PointerEntered"
                                                    PointerExited="SimilarSongStackPanel_PointerExited"
                                                    Spacing="10">

                                                    <TextBlock
                                                        FontSize="20"
                                                        FontWeight="SemiBold"
                                                        Text="{Binding Name}" />
                                                    <TextBlock FontSize="16" Text="{Binding Artist.Name}" />
                                                </StackPanel>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>

                            </ScrollViewer>

                        </StackPanel>

                    </StackPanel>
                </ScrollViewer>

            </Grid>
        </Grid>

        <Grid
            x:Name="SmokeGrid"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Visibility="Collapsed">
            <Grid.Background>
                <SolidColorBrush Opacity="0.8" Color="{ThemeResource SystemChromeAltHighColor}" />
            </Grid.Background>
            <Grid
                x:Name="destinationElement"
                Width="420"
                Height="400"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                BorderThickness="0"
                CornerRadius="5,5,5,5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Grid
                    Height="120"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Background="{ThemeResource SystemAccentColor}">
                    <TextBlock
                        Margin="12"
                        VerticalAlignment="Center"
                        FontWeight="Bold"
                        Style="{ThemeResource HeaderTextBlockStyle}"
                        Text="{Binding SelectedAchievement.Name}" />
                    <Button
                        Width="40"
                        Height="40"
                        Margin="5"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        AutomationProperties.Name="Close"
                        Click="PopUpBackButton_Click"
                        ToolTipService.ToolTip="Close">
                        <Button.Content>
                            <SymbolIcon Symbol="Clear" />
                        </Button.Content>
                    </Button>
                </Grid>
                <Grid
                    Grid.Row="1"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}">
                    <StackPanel>

                        <TextBlock Margin="12" Style="{ThemeResource BaseTextBlockStyle}" />

                        <TextBlock
                            Margin="12"
                            Style="{ThemeResource BaseTextBlockStyle}"
                            Text="{Binding SelectedAchievement.Description}" />

                        <TextBlock
                            Margin="12"
                            Style="{ThemeResource BaseTextBlockStyle}"
                            Text="{Binding SelectedAchievement.Tier}" />
                    </StackPanel>

                </Grid>
            </Grid>
        </Grid>
    </Grid>
</Page>